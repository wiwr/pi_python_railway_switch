<!DOCTYPE html>
<html>
  <head>
    <title>Railway Switch</title>
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <center>
      <h1>Railway Switch</h1>
    </center>
    <form method="get">
      <center>
	<div>
	<div class="SwitchName">Switch 1</div>
        <button class="ButtonLeft" onclick="SetSwitch('1', 'left')">Left</button>
        <button class="ButtonRight" onclick="SetSwitch('1', 'right')">Right</button>
	</div>
	<div>
	<div class="SwitchName">Switch 2</div>
        <button class="ButtonLeft" formaction="/switch/2/left" type="submit">Left</button>
        <button class="ButtonRight" formaction="/switch/2/right" type="submit">Right</button>
	</div>
	<div>
	<div class="SwitchName">Switch 3</div>
        <button class="ButtonLeft" formaction="/switch/3/left" type="submit">Left</button>
        <button class="ButtonRight" formaction="/switch/3/right" type="submit">Right</button>
	</div>
	<div>
	<div class="SwitchName">Switch 4</div>
        <button class="ButtonLeft" formaction="/switch/4/left" type="submit">Left</button>
        <button class="ButtonRight" formaction="/switch/4/right" type="submit">Right</button>
	</div>
	<div>
	<div class="SwitchName">Switch 5</div>
        <button class="ButtonLeft" formaction="/switch/5/left" type="submit">Left</button>
        <button class="ButtonRight" formaction="/switch/5/right" type="submit">Right</button>
	</div>
      </center>
    </form>
	<script>
		function SetSwitch(railwaySwitch, direction) {
			var xhr = new XMLHttpRequest();
			xhr.open("POST", "/control", true);
			xhr.setRequestHeader("Content-Type", "application/json");

			var data = {
				rsw: railwaySwitch,
				dir: direction
			};

			var jsonData = JSON.stringify(data);
			xhr.onload = function () {
				if (xhr.status >= 200 && xhr.status < 300) { 
					console.log(xhr.responseText);
				} else {
					console.error('Error: ' + xhr.status);
				}
			};

			xhr.send(jsonData);

		}
	</script>
  </body>
</html>
